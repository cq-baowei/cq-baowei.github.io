webpackJsonp([1],{CKM3:function(e,n){},NHnr:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=t("7+uW"),o={render:function(){var e=this.$createElement,n=this._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]};var a=t("VU/8")({name:"App"},o,!1,function(e){t("ymcE")},null,null).exports,i=t("/ocq"),r=t("mtWM"),c=t.n(r),u=new s.a({}),l=c.a.create(),p="http://222.217.61.68:8888/pms/api/v1";p="http://222.217.61.68:8888/pms-admin/api/v1";l.interceptors.request.use(function(e){var n=sessionStorage.getItem("userToken");return null!=n&&""!=n&&void 0!==n&&(e.headers["H-User-Token"]=n),e},function(e){}),l.interceptors.response.use(function(e){return e.data},function(e){});var d=function(e,n,t){var s={appId:"admin-web",signType:"signType",sign:"sign",reqTime:(new Date).getTime(),method:"method",reqData:n};l.post(p+e,s).then(function(s){void 0===s?t("FAIL","请求失败！"):"03"==s.rspCode?m(e,n,t):"02"==s.rspCode?(u.$Message.error(s.rspMessage),h.push("/")):"00"==s.rspCode?t("SUCCESS",s.rspMessage,s.rspData):t("ERROR",s.rspMessage)}).catch(function(e){console.log(e),t("ERROR","程序错误")})};function m(e,n,t){var s={appId:"admin-web",signType:"signType",sign:"sign",reqTime:(new Date).getTime(),method:"method",reqData:{}};l.post(p+"/token/tokenExtension",s).then(function(s){void 0===s?(h.push("/"),u.$Message.error("Token续期失败")):"00"==s.rspCode?(sessionStorage.setItem("userToken",s.rspData.userToken),d(e,n,t)):(u.$Message.error(s.rspMessage),h.push("/"))}).catch(function(e){console.log(e),u.$Message.error("Token续期失败"),h.push("/")})}var f={name:"HelloWorld",data:function(){return{tableData:[]}},mounted:function(){var e=this;this.getLoginInfo(),setTimeout(function(){e.getList()},2e3)},methods:{getLoginInfo:function(){d("/user/login",{account:"admin",password:"admin123456"},function(e,n,t){"FAIL"!=e&&"ERROR"!=e&&"SUCCESS"==e&&(sessionStorage.setItem("userToken",t.userToken),console.log(t))})},getList:function(){var e=this;d("/netDisk/selectChildFoldersAndFiles",{folderId:"cd2fda0d6cca4ea2b1cc3ec931349337"},function(n,t,s){"FAIL"!=n&&"ERROR"!=n&&"SUCCESS"==n&&(e.tableData=s.files,console.log(s))})},download:function(e){var n,t,s;n="/netDisk/downloadFile",t={fileId:e.fileId,fileName:e.fileName},s=function(e,n,t){"FAIL"!=e&&"ERROR"!=e&&"SUCCESS"==e&&console.log(t)},c.a.post(p+n,{appId:"zhyw-web",signType:"signType",sign:"sign",reqTime:(new Date).getTime(),method:"method",reqData:t},{responseType:"blob",headers:{"H-User-Token":sessionStorage.getItem("userToken")},onDownloadProgress:function(e){s(e)}}).then(function(e){var n=document.createElement("a"),s=new Blob([e.data]);n.style.display="none",n.href=URL.createObjectURL(s),n.setAttribute("download",t.fileName),document.body.appendChild(n),n.click(),document.body.removeChild(n)})}}},v={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"file-content"},[e._m(0),e._v(" "),e._l(e.tableData,function(n){return t("div",{key:n.fileId},[t("span",[e._v(e._s(n.fileName))]),e._v(" "),t("span",[e._v(e._s(n.fileSize))]),e._v(" "),t("span",[e._v(e._s(n.num))]),e._v(" "),t("span",[e._v(e._s(n.createTime))]),e._v(" "),t("span",{on:{click:function(t){return e.download(n)}}},[e._v("下载")])])})],2)},staticRenderFns:[function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"file-th"},[n("span",{staticClass:"name"},[this._v("文件名")]),this._v(" "),n("span",{staticClass:"size"},[this._v("文件大小")]),this._v(" "),n("span",{staticClass:"num"},[this._v("下载次数")]),this._v(" "),n("span",{staticClass:"time"},[this._v("上传时间")])])}]};var g=t("VU/8")(f,v,!1,function(e){t("CKM3")},"data-v-02e0ac40",null).exports;s.a.use(i.a);var h=new i.a({routes:[{path:"/",name:"Downloads",component:g}]});s.a.config.productionTip=!1,new s.a({el:"#app",router:h,components:{App:a},template:"<App/>"})},ymcE:function(e,n){}},["NHnr"]);
//# sourceMappingURL=app.ffc8942ae4da600b6cb7.js.map